# PRESSCO21 웹사이트 고도화 PRD

> **프로젝트명**: PRESSCO21 쇼핑몰 웹사이트 리뉴얼 및 고도화
> **플랫폼**: 메이크샵 D4 (카멜레온)
> **운영 URL**: foreverlove.co.kr
> **작성일**: 2026-02-19
> **버전**: 1.2 (기술 검증 반영)
> **기술 검증**: 조건부 통과 (신뢰도 7/10)

---

## 목차

1. [프로젝트 개요](#1-프로젝트-개요)
2. [현재 현황](#2-현재-현황)
3. [Phase 1 -- 기존 프로젝트 심화 고도화](#3-phase-1----기존-프로젝트-심화-고도화)
4. [Phase 2 -- 파트너 클래스 플랫폼](#4-phase-2----파트너-클래스-플랫폼)
5. [Phase 3 -- 수업 기획 도우미 + 리뷰 고도화](#5-phase-3----수업-기획-도우미--리뷰-고도화)
6. [기술 아키텍처](#6-기술-아키텍처)
7. [서비스 연동 맵](#7-서비스-연동-맵)
8. [로드맵 타임라인](#8-로드맵-타임라인)
9. [성공 지표 (KPI)](#9-성공-지표-kpi)
10. [기술 검증 결과](#10-기술-검증-결과)

---

## 1. 프로젝트 개요

### 1.1 배경

PRESSCO21은 30년 이상의 전통을 가진 압화(프레스드플라워) 및 보존화 전문 브랜드다.
메이크샵 D4 위에서 B2C/B2B 이커머스를 운영하며, 현재 7개 프로젝트가 배포 운영 중이다.

### 1.2 목적

- 기존 배포 7개 프로젝트의 코드 품질, UX, 성능 체계적 개선
- **핵심 신규 서비스**: 파트너 클래스 플랫폼 (제휴업체 강의 홍보 + 결제 + 수수료 선순환)
- **강사용 도구**: 수업 기획 도우미 (예산 맞춤 기획 + 재료 일괄 구매 연동)
- 유튜브 v4 카테고리 자동매칭 버전 개발
- 브랜드스토리, 화이트페이퍼 디자인 전면 리뉴얼

### 1.3 핵심 비즈니스 방향 -- 선순환 생태계

```
제휴업체 강의를 foreverlove.co.kr에서 홍보
  → 고객이 사이트 통해 결제
  → 수수료 취득
  → 수수료를 적립금으로 치환
  → 파트너가 재료 구매/강의 광고비로 사용
  → 매출 상승 → 더 많은 수수료 → 선순환
```

### 1.4 기술적 전제조건

| 항목 | 규칙 |
|------|------|
| 플랫폼 | 메이크샵 D4 (Vanilla HTML/CSS/JS, CDN만 사용, 빌드 도구 없음) |
| JS 이스케이프 | 템플릿 리터럴 `${var}` → `\${var}` 필수 |
| 가상 태그 | `{$치환코드}`, `<!-- -->` 절대 보존 |
| JS 격리 | IIFE 패턴 필수 |
| CSS 스코핑 | 컨테이너 ID/클래스로 범위 제한 필수 |
| 반응형 | 768px / 992px / 1200px |

---

## 2. 현재 현황

### 2.1 프로젝트별 현황

| 프로젝트 | 상태 | 핵심 이슈 |
|---------|------|----------|
| `메인페이지/` | 운영 중 | jQuery 의존, 인라인 스크립트 혼재, IIFE 미적용 |
| `간편 구매/` | 운영 중 | 전역 스코프 오염, MutationObserver body 전체 감시 |
| `1초 로그인(킵그로우)/` x3 | 운영 중 | CSS 전역 오염(`*` 셀렉터), 3개 파일 완전 중복 |
| `유튜브 자동화/현재-배포/` | 운영 중 | 관련 상품 하드코딩, GAS 프록시 단일 장애점 |
| `파트너맵/` | 운영 중 | JS 132KB 거대 단일 파일, API 키 노출 |
| `브랜드스토리/브랜드페이지/` | 운영 중 | 이미지 경로 로컬 상대경로, CSS 62.5KB 대형 |
| `레지너스 화이트페이퍼/` | 운영 중 | 가장 잘 정리됨 (코드 패턴 모범 사례) |
| `유튜브 자동화/신규-hybrid-미배포/` | 미배포 | 제품 자동 매칭, product-mapping.json |
| `가이드 페이지/` | 미구현 | 폴더만 존재 |

### 2.2 수정본 적용 현황 (Phase 0 -- 완료)

| 수정본 | 개선 내용 | 상태 |
|--------|----------|------|
| `간편 구매/js.fixed.js` | IIFE, null 체크, rAF, MutationObserver 범위 축소 | **적용 완료** |
| `1초 로그인/css.fixed.css` x3 | `*` 셀렉터를 `#loginWrap *`로 스코핑 | **적용 완료** |
| `1초 로그인/index.fixed.html` x3 | 인라인 스크립트 IIFE, const/let → var | **적용 완료** |

### 2.3 코드 패턴 레퍼런스

`레지너스 화이트페이퍼/script.js`의 **코드 구조만** 레퍼런스로 활용:

```javascript
// JS 표준 패턴
(function() {
    'use strict';
    var root = document.getElementById('[container-id]');
    if (!root) return;
    var CONFIG = { ... };
    // 이벤트 위임: root.addEventListener('click', function(e) { ... })
    // 전역 노출 필요 시만: window.functionName = functionName;
})();
```

```css
/* CSS 표준 패턴 */
#[container-id] { --color-primary: #7d9675; }
#[container-id] .section-name { ... }
@media (min-width: 768px) { ... }
```

---

## 3. Phase 1 -- 기존 프로젝트 심화 고도화

> **기간**: 4~7주 (검증 반영: 디자인 리뉴얼 2건 포함으로 기존 2~4주에서 상향)
> **목표**: 배포된 프로젝트들의 UX, 성능, 접근성을 한 단계 끌어올린다
>
> **Phase 1a** (2~3주): 기존 코드 개선 -- 1-1, 1-3, 1-5, 1-6, 1-7, 1-8
> **Phase 1b** (2~3주): 신규 개발 + 리뉴얼 -- 1-2, 1-4, 1-9 (1a와 병렬 가능)

### 3.1 작업 목록

| # | 작업 | 규모 | 대상 |
|---|------|------|------|
| 1-1 | [메인페이지 JS IIFE + 탭 지연 로드 + 스켈레톤 UI](#31-메인페이지) | M | 메인페이지 |
| 1-2 | [유튜브 v4 카테고리 자동매칭 버전 개발](#32-유튜브-v4-카테고리-자동매칭) | M | 유튜브 자동화 |
| 1-3 | [간편 구매 상품 상세 UX 강화](#33-간편-구매) | M | 간편 구매 |
| 1-4 | [브랜드스토리 이미지 CDN + 디자인 리뉴얼](#34-브랜드스토리) | M | 브랜드스토리 |
| 1-5 | [파트너맵 보안 + 상세 모달 + 길찾기](#35-파트너맵) | M | 파트너맵 |
| 1-6 | [전체 사이트 이미지 lazy loading + 접근성](#36-전체-공통) | S | 전체 |
| 1-7 | [SEO 기본 개선](#37-seo) | S | 전체 |
| 1-8 | [1초 로그인 CSS 중복 제거 + 접근성](#38-1초-로그인) | S | 1초 로그인 |
| 1-9 | [레지너스 화이트페이퍼 CTA + PDF + 디자인 리뉴얼](#39-레지너스-화이트페이퍼) | S | 레지너스 |

---

### 3.1 메인페이지

**대상 파일**: `메인페이지/js.js`, `메인페이지/Index.html`, `메인페이지/css.css`

| 항목 | 개선 내용 | 우선순위 |
|------|----------|---------|
| JS IIFE 적용 | `js.js` 전체 IIFE 감싸기, `get_main_list`는 `window` 노출 유지 | 중 |
| 탭 지연 로드 | 초기에 활성 탭만 AJAX 로드, 나머지는 클릭 시 로드 | 중 |
| 이미지 lazy loading | `<img loading="lazy">` (배너 제외 하단 섹션부터) | 중 |
| 인라인 스크립트 정리 | HTML 내 YouTube/Swiper 초기화 스크립트를 `js.js`로 통합 | 하 |
| 배너 UX | 프로그레스 바 pagination, 배너별 CTA 버튼 강화 | 하 |
| 모바일 탭 | 활성 탭 자동 중앙 스크롤 | 중 |
| 스켈레톤 UI | New Arrival 탭 전환 시 로딩 스켈레톤 표시 | 하 |

---

### 3.2 유튜브 v4 카테고리 자동매칭

> **핵심 변경**: 영상별 수동 상품 입력 → 카테고리 키워드 자동 매칭
> **v3(하드코딩)과 하이브리드(수동 입력) 모두 폐기**, v4 신규 개발

#### A. 카테고리 자동 매칭 시스템

**기존 방식 (폐기)**:
- v3: HTML에 4개 상품 하드코딩 (모든 영상에 동일)
- 하이브리드: 영상 설명에 `[제품코드: P1001]` 수동 입력

**새로운 방식**:
```
영상 제목/설명/태그 → 카테고리 키워드 매칭 → 해당 카테고리 인기 상품 자동 표시
```

**1. 카테고리 키워드 테이블** (Google Sheets, 한 번만 설정):

| 키워드 | 카테고리 |
|--------|---------|
| 압화, pressed | 압화 |
| 보존화, 프리저브드 | 보존화 |
| 레진, resin, UV | 레진공예 |
| 하바리움 | 하바리움 |
| 부케, 꽃다발 | 부케말리기 |
| 표본, 식물표본 | 식물표본 |
| DIY, 키트 | DIY키트 |

**2. 카테고리별 상품 목록** (Google Sheets, 주 1회 관리자 업데이트):
- 카테고리별 branduid, 이름, 가격, 이미지 URL 관리

**3. 자동 매칭 로직** (JS):
```javascript
function autoMatchCategory(video, keywordTable) {
    var text = (video.title + ' ' + (video.description || '') + ' '
        + (video.tags || []).join(' ')).toLowerCase();
    // 검증 반영: 긴 키워드 우선 매칭으로 오탐 방지 (예: "레진공예" > "레진")
    var sortedKeywords = Object.keys(keywordTable).sort(function(a, b) {
        return b.length - a.length;
    });
    for (var i = 0; i < sortedKeywords.length; i++) {
        if (text.indexOf(sortedKeywords[i]) >= 0) {
            return keywordTable[sortedKeywords[i]];
        }
    }
    return 'default'; // 매칭 실패 시 전체 인기상품 표시
}
```

> **검증 반영**: 태그 매칭에 더 높은 가중치 부여, 매칭 결과 Sheets 로깅으로 오탐 분석,
> 관리자가 특정 영상 카테고리를 수동 오버라이드할 수 있는 필드 추가 권장

**4. 매칭 실패 시**: "전체 인기 상품" 자동 표시 (빈 화면 절대 없음)

**운영 부담 비교**:

| 항목 | 기존 하이브리드 | 새 카테고리 방식 |
|------|--------------|---------------|
| 영상 업로드 시 | 설명에 제품코드 입력 (매주) | **아무 것도 안 함** |
| 상품 관리 | JSON 수정 + 배포 | Sheets에서 업데이트 (월 1~2회) |
| 새 카테고리 추가 | JSON 수정 + 배포 | Sheets에 행 추가만 |

#### B. GAS v3 응답 형태 (youtube-proxy-v3.gs)

```json
{
  "status": "success",
  "items": [
    {
      "id": "videoId",
      "title": "압화 에코백 만들기",
      "description": "오늘은 압화로 에코백을...",
      "tags": ["압화", "에코백", "DIY"],
      "publishedAt": "2026-02-15T10:00:00Z",
      "viewCount": "15234",
      "thumbnail": "https://..."
    }
  ],
  "categoryKeywords": { "압화": "압화", "보존화": "보존화" },
  "categoryProducts": {
    "압화": [{ "branduid": 1001, "name": "...", "price": "35,000", "image": "..." }],
    "default": [인기상품 목록]
  }
}
```

#### C. UI/UX 개선

| 항목 | 내용 |
|------|------|
| 메인 영상 | iframe → 썸네일 클릭 시 로드 (Intersection Observer) |
| 카테고리 배지 | 영상 카드에 자동 감지된 카테고리 표시 |
| 조회수 표시 | "1.5만 조회" 형식 |
| NEW 배지 | 3일 이내 영상에 표시 |
| 상품 영역 | "이 영상의 추천 재료" 타이틀 + 카테고리명 |
| 매칭 실패 | "전체 인기 상품" 자동 표시 |
| 모바일 토글 | 상품 영역 아코디언 애니메이션 |
| 영상 전환 | 슬라이더 클릭 시 메인 영상 + 상품 자동 업데이트 |

#### D. 파일 구조

```
유튜브 자동화/v4-카테고리/
├── Index.html          # HTML 마크업
├── css.css             # .youtube-v4-section 스코핑
├── js.js               # IIFE, 카테고리 매칭, 렌더링
├── youtube-proxy-v3.gs # GAS (영상+키워드+상품 통합)
└── GUIDE.md            # 운영 가이드
```

#### E. 배포 체크리스트

1. Google Sheets에 카테고리 키워드 테이블 + 상품 목록 작성
2. youtube-proxy-v3.gs 개발 (YouTube API + Sheets 통합 응답)
3. v4 프론트엔드 개발 (Index.html + css.css + js.js)
4. 현재 메인페이지 HTML 전체 백업
5. 메인 HTML `<!--s: section_youtube-->` ~ `<!--e: section_youtube-->` 영역을 v4로 교체
6. 기존 v3 CSS/JS 규칙 제거
7. PC/모바일 테스트 (영상 로드, 카테고리 매칭, 상품 표시, 캐시)
8. 문제 시 백업본 즉시 복원

---

### 3.3 간편 구매

**대상 파일**: `간편 구매/index.html`, `간편 구매/js.fixed.js`, `간편 구매/css.css`

| 항목 | 개선 내용 | 우선순위 |
|------|----------|---------|
| 상품 이미지 줌 | 모바일 핀치 줌 + 스와이프 제스처 | 중 |
| 최근 본 상품 | localStorage 기반 위젯 | 중 |
| SNS 공유 강화 | 카카오톡 공유 시 OG 메타 포함 | 하 |
| 리뷰 앵커 | 리뷰 섹션 바로가기 버튼 | 하 |
| 전환율 유도 | "오늘 N명이 봤습니다", "품절 임박" 배지 | 중 |

---

### 3.4 브랜드스토리

**대상 파일**: `브랜드스토리/브랜드페이지/` (heritage.css + index.html + js/)

| 항목 | 개선 내용 | 우선순위 |
|------|----------|---------|
| 이미지 CDN 마이그레이션 | 로컬 경로 → CDN 절대 경로 변환 | 상 |
| WebP 변환 | PNG 갤러리 이미지 → WebP | 중 |
| 갤러리 라이트박스 | 이미지 클릭 시 전체화면 뷰어 (swipe) | 중 |
| 인쇄 최적화 | `@media print` 스타일 (B2B 프레젠테이션용) | 하 |
| **디자인 전면 리뉴얼** | 현대적 럭셔리 브랜드 느낌으로 재설계 (11개 섹션 전체) | 상 |

---

### 3.5 파트너맵

**대상 파일**: `파트너맵/js.js`, `파트너맵/Index.html`, `파트너맵/css.css`

| 항목 | 개선 내용 | 우선순위 |
|------|----------|---------|
| API 보안 | 네이버 클라우드 허용 도메인 설정 | **최우선** |
| 파트너 상세 모달 | 영업시간, 사진, 연락처, 길찾기 버튼 | 중 |
| 길찾기 연동 | 네이버 지도 앱 딥링크 | 중 |
| 검색 결과 없음 UX | "가까운 파트너 추천" | 하 |
| 가상 스크롤링 | 100개+ 시 뷰포트 렌더링만 | 하 |

---

### 3.6 전체 공통

| 항목 | 내용 |
|------|------|
| 이미지 lazy loading | `<img loading="lazy">` (배너 제외 하단부터) |
| alt 텍스트 | 모든 이미지에 의미 있는 alt |
| ARIA | 인터랙티브 요소에 적절한 role/aria 속성 |

---

### 3.7 SEO

| 항목 | 내용 |
|------|------|
| 메타태그 | 페이지별 고유 `<title>`, `<meta description>` |
| 구조화 데이터 | Product, Organization, BreadcrumbList Schema.org |
| OG 태그 | og:image, og:price 등 상세 OG 태그 |

---

### 3.8 1초 로그인

**대상 파일**: `1초 로그인(킵그로우)/` 하위 3개 폴더

| 항목 | 개선 내용 | 우선순위 |
|------|----------|---------|
| CSS 중복 제거 | 공통 CSS 1개 + 변형별 오버라이드로 통합 | 중 |
| 접근성 | `autocomplete` 속성, 에러 메시지 `role="alert"` | 하 |
| 비밀번호 토글 | 비밀번호 표시/숨기기 버튼 | 하 |

---

### 3.9 레지너스 화이트페이퍼

**대상 파일**: `레지너스 화이트페이퍼/` (style.css + index.html + script.js)

| 항목 | 개선 내용 | 우선순위 |
|------|----------|---------|
| CTA 추가 | 하단 "Resiners Purair 구매하기" 버튼 | 중 |
| PDF 다운로드 | `window.print()` 활용 PDF 내보내기 | 하 |
| SEO | Schema.org Article 마크업 | 하 |
| **디자인 전면 리뉴얼** | 신뢰감 있는 전문 문서 디자인으로 격상 (12개 섹션 전체, JS 로직 유지) | 상 |

---

## 4. Phase 2 -- 파트너 클래스 플랫폼

> **기간**: 2~3개월 (검증 반영: 메이크샵 API 검증 시간 + 정산 안전성 설계 포함)
> **규모**: XL
> **목표**: 제휴업체 강의 홍보 + 결제 + 수수료→적립금 **선순환 생태계** 구축
>
> **착수 전 필수 확인 사항**:
> 1. 메이크샵 `process_reserve` API 테스트 -- "특정 회원에게 N원 적립금 지급" 가능 여부
> 2. 메이크샵 치환코드로 프론트에서 로그인 회원 ID 읽기 가능 여부 (파트너 인증 핵심)
> 3. 메이크샵 상품 옵션 수 제한 확인 (클래스 일정 증가 시)

### 4.1 비즈니스 모델 -- 선순환 수수료 구조

```
[제휴업체/공방]                    [PRESSCO21]                     [고객]
     │                               │                              │
     ├── 강의 정보 등록 ──────────→ 클래스 플랫폼에 노출 ←────── 강의 검색/탐색
     │                               │                              │
     │                          고객이 결제 ←──────────────────── 수강 결제
     │                               │
     │                          수수료 차감 (10~15%)
     │                               │
     │   ┌── 결제금 전달 (수수료 제외) ─┘
     │   │
     ├───┤  수수료 → 적립금으로 전환
     │   │           │
     │   │           ├── 재료 구매에 사용 → PRESSCO21 매출
     │   │           └── 강의 광고비에 사용 → 더 많은 노출
     │   │
     └───┘  ★ 선순환: 매출↑ → 적립금↑ → 재료구매+광고↑ → 노출↑ → 매출↑
```

**수수료 정책**:

| 매출 구간 | 수수료율 | 적립금 전환 | 설명 |
|----------|---------|-----------|------|
| 월 50만원 미만 | 10% | 100% | 신규 파트너 성장 지원 |
| 월 50~200만원 | 12% | 80% | 안정 성장기 |
| 월 200만원 이상 | 15% | 60% | 우수 파트너 |

**적립금 사용처**: 재료 구매(도매가) / 광고 노출 부스트 / 신상품 샘플 / 계절 프로모션

### 4.2 고객 경험 (수강생 플로우)

#### 1단계: 강의 탐색
- 메인 또는 전용 `/클래스` 페이지 진입
- **필터**: 지역(파트너맵 연동) / 카테고리 / 난이도 / 형태(원데이, 정기, 온라인) / 가격대 / 날짜
- **정렬**: 인기순, 평점순, 가격순, 최신순
- 카드형 목록: 썸네일, 강의명, 강사명, 별점, 가격, 남은 자리, 지역

#### 2단계: 강의 상세
- 대표 이미지 갤러리 (Swiper CDN)
- 강의 설명 + 커리큘럼 (아코디언)
- 강사/공방 프로필 (파트너맵 데이터 연동)
- 일정 캘린더 (flatpickr CDN) - 날짜/시간, 정원/잔여석
- 수강 후기 (별점 + 텍스트 + 사진)
- "이 강의에 필요한 재료" 상품 링크 → 간편구매 연결
- 관련 YouTube 영상 (유튜브 v4 연동)

#### 3단계: 결제
- 일정 선택 → 인원 → 옵션(재료 포함/별도) → 예약자 정보
- **클래스를 메이크샵 상품으로 등록 → 메이크샵 자체 결제 시스템 활용**
- 결제 완료 → GAS 자동 처리:
  - 수강생에게 확인 이메일 (예약번호, 일정, 장소, 준비물)
  - 파트너에게 예약 안내 이메일 (수강생 정보, 결제 내역)
  - Sheets에 예약 기록 저장
  - 수수료 계산 + 적립금 전환

#### 4단계: 수강 후
- D-3, D-1 리마인더 이메일 (수강생 + 강사)
- 수강 후 7일: 후기 작성 유도
- 수강 후 14일: "다음 추천 클래스" 이메일

### 4.3 파트너 경험 (제휴업체/강사 플로우)

#### 파트너 가입 및 인증
1. 파트너 신청 폼 → 사업자등록증 + 포트폴리오 제출
2. 관리자 심사 → 승인 → 파트너 코드 발급
3. 인증 등급 부여 (파트너맵 배지 연동):
   - **실버**: 기본 가입 + 필수 교육 이수
   - **골드**: 10건+ 수강 + 평점 4.0+ + 심화 교육
   - **플래티넘**: 50건+ + 평점 4.5+ + 마스터 인증

#### 파트너 대시보드 (Google Sheets + GAS)
- 내 강의 관리: 등록/수정/일정 추가/중단
- 예약 현황: 실시간 예약 목록, 수강생 연락처
- 수익 리포트: 월별 매출, 수수료, 적립금 잔액
- 적립금 사용: 재료 주문(도매가), 광고 부스트 신청
- 후기 관리: 수강생 후기 확인 + 답변

> **검증 반영 -- 파트너 인증/인가 메커니즘** (Critical):
> 1. 메이크샵 치환코드 `{$member_id}`를 HTML에 삽입, JS에서 읽어 GAS 요청 시 파라미터로 전달
> 2. GAS 서버에서 해당 회원 ID에 매칭되는 파트너 데이터만 반환 (비파트너 접근 차단)
> 3. GAS 엔드포인트에 파트너별 고유 인증 토큰 + Referer 체크(foreverlove.co.kr만 허용)
> 4. 수강생 개인정보 마스킹 처리 (010-\*\*\*\*-1234) -- 개인정보보호법 준수

#### 강의 등록 프로세스
1. Google Forms로 강의 정보 입력
2. 관리자 검수 → 승인 → 플랫폼 자동 노출
3. 메이크샵에 클래스를 상품으로 등록 (결제 처리용)

### 4.4 파트너 교육 시스템 (아카데미)

**필수 교육**: 브랜드 가이드라인 / 기본 안전 수칙 / 플랫폼 사용법
**선택 교육**: 트렌드 업데이트 / 신상품 활용법 / 교육 기법
**제공 방식**: YouTube unlisted 영상 + 간단 퀴즈(Google Forms) → 합격 시 인증서

### 4.5 결제→정산→안내 자동화 파이프라인

```
고객 결제 (메이크샵 상품 결제)
    │
    ▼
GAS 트리거 (주기적 새 주문 감지)
    ├── [수강생 이메일] 예약 확인 + 상세 정보
    ├── [파트너 이메일] 새 예약 알림 + 수강생 정보
    ├── [Sheets 기록] 예약 시트에 행 추가
    ├── [수수료 계산] 결제금 × 수수료율 → 시트 기록
    └── [적립금 전환] 수수료 × 전환비율 → 파트너 잔액 업데이트

D-3 리마인더 (GAS 시간 트리거)
    ├── [수강생] "3일 후 수업입니다" + 준비물 안내
    └── [파트너] "3일 후 수업 예정" + 수강생 명단

D-1 리마인더 (GAS 시간 트리거)
    ├── [수강생] "내일 수업입니다" + 장소/접속 안내
    └── [파트너] "내일 수업 예정" + 최종 확인

수강 완료 + 7일
    └── [수강생] 후기 작성 유도 + 다음 클래스 추천
```

> **검증 반영 -- 정산 데이터 무결성** (Critical):
> - GAS `LockService.getScriptLock()`으로 동시 쓰기 방지
> - 정산 상태 관리: "대기 → 처리중 → 완료/실패" 3단계
> - 적립금 API 호출 실패 시 관리자 알림 + 수동 복구 프로세스
> - 일 1회 Sheets 잔액 vs 메이크샵 적립금 잔액 정합성 검증 배치

### 4.6 사용자 시나리오

**시나리오 1: 일반 고객 원데이 클래스**
> 김OO (30대, 압화 초보) → foreverlove.co.kr → "원데이 클래스" 배너 → 서울 강남 / 압화 / 입문 필터 → "압화 에코백 만들기" (후기 4.8점, 잔여 3석) → 토요일 오후 2시, 2명, 재료 포함 → 결제 55,000원 x 2 → 확인 이메일 → D-1 리마인더 → 수강 → 후기 → "다음 추천: 압화 핸드폰 케이스"

**시나리오 2: 제휴 공방 파트너**
> 박OO (공방 운영자) → 파트너 가입 → 필수 교육 이수 → 실버 등급 → "보존화 꽃다발 클래스" 등록 → 월 4회 진행, 매출 120만원 → 수수료 12% = 14.4만원 → 적립금 11.5만원 → 재료 8만원 + 광고 3.5만원 → 노출↑ → 다음 달 180만원 → 골드 등급

**시나리오 3: 기업 단체**
> 이OO (기업 복지) → 단체 문의 폼 → 기업명/인원 20명 → GAS가 관리자 알림 → 파트너 강사 매칭 → 맞춤 견적

### 4.7 기술 구현

#### 메이크샵 네이티브 활용

| 기능 | 메이크샵 구현 |
|------|-------------|
| 클래스 결제 | 클래스를 "상품"으로 등록, 옵션(날짜/시간)=예약 슬롯, 재고=정원 |
| 수수료→적립금 | 적립금 지급 API로 파트너 회원에게 자동 지급 |
| 파트너 분류 | 회원그룹 API로 파트너/수강생 그룹 관리 |
| 주문 추적 | 주문 조회 API로 새 주문 감지 → 정산 트리거 |

#### GAS + Google Sheets (보조)

| 시트명 | 역할 |
|--------|------|
| 파트너 상세 | 코드, 등급, 교육이수, 포트폴리오, 수수료율 |
| 클래스 메타 | 클래스ID, 커리큘럼JSON, 강사소개, 이미지, 유튜브ID |
| 정산 내역 | 파트너코드, 월, 매출, 수수료, 적립금전환, 잔액 |

#### 파일 구조

```
파트너클래스/
├── 목록/
│   ├── Index.html      # 클래스 카탈로그 (필터/검색/카드 목록)
│   ├── css.css         # .class-catalog 스코핑
│   └── js.js           # IIFE, GAS 호출, 필터링, 렌더링
├── 상세/
│   ├── Index.html      # 클래스 상세 (갤러리, 커리큘럼, 일정, 후기)
│   ├── css.css         # .class-detail 스코핑
│   └── js.js           # IIFE, 상세 렌더링, 결제 연동
├── 파트너/
│   ├── Index.html      # 파트너 대시보드 (내 강의, 예약, 수익, 적립금)
│   ├── css.css         # .partner-dashboard 스코핑
│   └── js.js           # IIFE, 파트너 인증, 대시보드 렌더링
├── class-platform-gas.gs  # GAS 통합 (API+이메일+정산+트리거)
└── GUIDE.md
```

### 4.8 Phase 2 작업 분해

| # | 작업 | 규모 | 기간 |
|---|------|------|------|
| 2-1 | 클래스 목록/상세 페이지 개발 | L | 2~3주 |
| 2-2 | 결제→정산→이메일 자동화 GAS | L | 2주 |
| 2-3 | 파트너 대시보드 + 인증 시스템 | M | 1.5~2주 |
| 2-4 | 교육 아카데미 (필수교육 + 인증) | S | 1주 |
| 2-5 | 메인페이지에 클래스 진입점 추가 | S | 0.5주 |

---

## 5. Phase 3 -- 수업 기획 도우미 + 리뷰 고도화

> **기간**: Phase 2 완료 후 2~3개월
> **목표**: 강사/체험업체 대상 도구 + 리뷰 강화

### 5.1 수업 기획 도우미 (규모: M, 3~4주)

#### 핵심 개념 -- "예산 맞춤 수업 기획"

```
[강사가 입력]                          [시스템이 자동 산출]
수업 종류: 압화 에코백                    재료 목록 + 수량 + 단가
수강 인원: 15명                         총 재료비: 375,000원
1인당 예산: 35,000원                    1인당 재료비: 25,000원
                                       강사 마진: 10,000원/인
                                       총 수익 예상: 150,000원
                                       ──────────────
                                       [재료 일괄 구매] → 간편구매
                                       [견적서 다운로드] → PDF
                                       [수업 가이드 보기] → 커리큘럼
```

#### 핵심 기능

**A. 수업 기획 계산기**

| 기능 | 설명 |
|------|------|
| 프로젝트 템플릿 | 20종+ (압화 액자/에코백, 레진 키링/트레이, 하바리움 보틀 등) |
| 파라미터 입력 | 수업 유형, 인원, 1인당 예산, 시간, 난이도 |
| 자동 산출 | 재료 목록 + 수량(여유분 15%) + 단가 + 총액 |
| 예산 최적화 | 초과 시 대체 재료 자동 제안 |
| 수익 시뮬레이션 | 수강료 설정 → 재료비 차감 → 예상 수익 |
| 일괄 장바구니 | "전체 재료 장바구니 담기" |
| 견적서 출력 | HTML → PDF (교육기관 발주용) |
| 수업 저장 | localStorage에 기획안 저장/불러오기 |

**B. 수업 가이드 라이브러리**

| 기능 | 설명 |
|------|------|
| 커리큘럼 템플릿 | 60분/90분/120분 시간표 |
| 단계별 가이드 | 텍스트 + 이미지 + YouTube (v4 연동) |
| 난이도 구분 | 입문 / 중급 / 심화 |
| 인쇄용 자료 | 수강생 배포용 요약 시트 |
| 검색 | Fuse.js 퍼지 검색 + 필터 |

**C. 교육기관 특화**

| 기능 | 설명 |
|------|------|
| 이메일 발송 | 재료 목록 + 견적서 (GAS MailApp) |
| 학교 발주서 양식 | 기관 형태 견적서 포맷 |
| 대량 할인 | 30명+ 시 B2B 도매가 안내 |

#### 기술 구현

**Google Sheets 3개**:

| 시트명 | 역할 |
|--------|------|
| 프로젝트 템플릿 | ID, 유형명, 카테고리, 난이도, 기본 시간, 설명, 썸네일 |
| 재료 매핑 | 템플릿ID, 재료명, branduid, 1인 수량, 단가, 대체재료ID |
| 가이드 콘텐츠 | 템플릿ID, 단계, 제목, 본문(HTML), 이미지URL, YouTube ID |

**파일 구조**:

```
수업기획도우미/
├── Index.html      # 메인 (템플릿 선택 + 계산기 + 가이드)
├── css.css         # .class-planner 스코핑
├── js.js           # IIFE, 계산 로직, 가이드 렌더링, 검색
├── planner-gas.gs  # GAS (데이터 + 이메일)
└── GUIDE.md
```

---

### 5.2 리뷰 고도화 (규모: S~M, 2~3주)

#### 핵심 기능

| 기능 | 설명 |
|------|------|
| 사진/영상 리뷰 수집 | 구매 후 7일 이메일 유도 (GAS) |
| 리뷰 허브 | 전체 리뷰 모아보기 + 필터 + 인피니트 스크롤 |
| 상품 상세 위젯 | 간편구매에 "포토 리뷰" 섹션 삽입 |
| 리뷰어 등급 | 루키 → 크래프터 → 마스터 |
| 인센티브 | 텍스트 500원 / 사진 1,000원 / 영상 2,000원 / 베스트 5,000원 |
| 베스트 리뷰 | 주간/월간 자동 선정 (좋아요 기반) |

#### 파일 구조

```
리뷰허브/
├── Index.html      # 리뷰 모아보기 허브
├── css.css         # .review-hub 스코핑
├── js.js           # IIFE, 리뷰 목록, 필터, 무한 스크롤
├── widget/
│   ├── css.css     # 상품 상세 삽입용 위젯
│   └── js.js       # 위젯 렌더링 (간편구매용)
├── review-gas.gs   # GAS (리뷰 CRUD + 이메일 + 인센티브)
└── GUIDE.md
```

---

## 6. 기술 아키텍처

### 6.1 3계층 백엔드 아키텍처

```
[메이크샵 D4 프론트엔드]
    │
    ├── 결제/적립금/회원 ──→ [메이크샵 네이티브]
    │                         · 클래스=상품, 옵션=일정, 재고=정원
    │                         · 적립금 지급 API → 수수료 전환
    │                         · 회원그룹 → 파트너/수강생 분류
    │
    ├── 데이터 조회/저장 ──→ [GAS + Google Sheets]
    │                         · 클래스 메타데이터
    │                         · 파트너 상세 정보, 정산 내역
    │                         · 수업 기획 템플릿 + 재료 매핑
    │
    └── 자동화 ─────────→ [GAS 트리거]
                            · 이메일 발송 (확인, 리마인더, 후기)
                            · 주기적 주문 폴링 → 정산 → 적립금 지급
                            · 스프레드시트 리포트 자동 생성
```

### 6.2 CORS 프록시 패턴

프론트엔드에서 메이크샵 API 직접 호출 불가 → GAS를 프록시로 활용:

```
[프론트 JS] → fetch(GAS doGet URL) → [GAS] → MakeShop API → [응답] → [GAS 가공] → [프론트]
```

- API 키는 GAS 서버사이드에서만 관리 (프론트엔드 노출 없음)
- 메이크샵 Open API: 조회+처리 각 시간당 500회 제한

### 6.3 GAS 한계 인식

| 항목 | 제한 | 대응 |
|------|------|------|
| 응답 속도 | 400~1,500ms | 데이터 유형별 캐싱 차별화 (아래 참고) |
| 이메일 | 일 100명 (개인) | 일일 이메일 70건 도달 시 Workspace 전환 |
| 동시 실행 | 30개 | 초기에는 충분 |
| 데이터 | 10,000행 이하 쾌적 | 초기에는 충분 |
| 트리거 실행 | 6분/회 | 주문 10건+ 동시 처리 시 파이프라인 분리 필요 |

> **검증 반영 -- 캐싱 전략 차별화**:
> - 정적 데이터 (카테고리, 가이드): localStorage **24h** 캐싱
> - 반정적 데이터 (클래스 목록, 파트너 정보): localStorage **1h** 캐싱
> - 실시간 데이터 (잔여석, 예약 현황): **캐싱 불가** -- 메이크샵 네이티브 재고로 대응

> **검증 반영 -- 메이크샵 API 호출 경합** (Critical):
> 메이크샵 조회 API 500회/시간은 모든 서비스 합산.
> 유튜브 v4 + 파트너맵 + 클래스 플랫폼이 동시에 사용하므로 API 호출 예산(budget) 산정 필수.
> - 주문 폴링 간격: 10~15분 (시간당 4~6회)
> - 상품(클래스) 정보: GAS에서 일 1회 배치로 Sheets 동기화, 프론트는 Sheets 데이터 조회
> - 일일 이메일 발송 카운트를 Sheets에 기록하여 모니터링

### 6.4 확장 시나리오 (필요할 때만)

| 전환 시점 | 지표 | 대응 |
|----------|------|------|
| 이메일 100명/일 초과 | 일일 예약 50건+ | Workspace 또는 SendGrid |
| GAS 응답 불만 | 사용자 체감 지연 | Cloudflare Workers 프록시 |
| Sheets 과다 | 10,000행+ | CF D1 (SQLite) 전환 |

### 6.5 성능 최적화

| 영역 | 기법 |
|------|------|
| 이미지 | WebP, `loading="lazy"`, width/height (CLS 방지) |
| JS | `passive: true`, rAF throttle, MutationObserver 범위 최소화 |
| CSS | Critical CSS 인라인화, 미사용 규칙 정리 |
| 네트워크 | `<link rel="preconnect">` (CDN), `font-display: swap` |

### 6.6 분석/추적

- GA4 이벤트: 배너 클릭, 카테고리, 탭 전환, YouTube 재생, SNS 공유, 파트너맵 검색
- 전역: `window.trackEvent(category, action, label)`

---

## 7. 서비스 연동 맵

```
메인페이지 ──→ 파트너 클래스 플랫폼 ──→ 간편구매 (재료 구매)
    │              │                        │
    │              ├── 파트너맵 연동           ├── 리뷰 허브 (포토 리뷰 위젯)
    │              │   (강사 위치/프로필)       │
    │              │                        └── 수업 기획 도우미
    │              ├── 유튜브 v4 연동              │
    │              │   (미리보기 영상)              ├── 재료 일괄 구매 → 간편구매
    │              │                              └── 대량 주문 → 파트너 클래스
    │              └── 수업 기획 도우미
    │                  (강사 수업 기획)
    │
    └── 유튜브 v4 (Learn & Shop)

파트너 클래스 플랫폼 (선순환 엔진)
    ├── 고객 결제 → 수수료 → 적립금
    ├── 적립금 → 재료 구매 (간편구매/B2B 도매가)
    └── 적립금 → 광고 부스트 → 더 많은 수강 → 더 많은 수수료
```

---

## 8. 로드맵 타임라인

```
2026년 (검증 반영 일정)
2월         3월              4월~5월                     6월~7월
├── P1a ────┤├── P1b ────┤
│ 기존코드개선 ││ 유튜브v4   │
│ 메인IIFE    ││ 브랜드리뉴얼│
│ 간편구매UX  ││ 화이트리뉴얼│
│ 파트너맵    ││            │
│ SEO+접근성  │├─ API 검증 ─┤
│ 1초로그인   ││ 적립금API  │
│             ││ 치환코드   │
│             ││ 옵션제한   │
│             │├── Phase 2 ────────────────────────────┤
│             ││  파트너 클래스 플랫폼                     ├── Phase 3 ──────────┤
│             ││    클래스 목록/상세                      │  수업 기획 도우미     │
│             ││    결제→정산→이메일 자동화               │  리뷰 고도화        │
│             ││    파트너 대시보드+인증                   │                    │
│             ││    교육 아카데미                         │                    │
│             ││    메인페이지 연동                       │                    │
```

> **검증 반영**: Phase 1을 1a/1b로 분리하여 병렬 진행. Phase 2 착수 전 API 검증 기간(1~2주) 추가.

---

## 9. 성공 지표 (KPI)

### 비즈니스 지표

| 지표 | Phase 1 | Phase 2 | Phase 3 |
|------|---------|---------|---------|
| 페이지 로드 시간 (LCP) | 30% 감소 | - | - |
| 상품→장바구니 전환율 | 10%↑ | 20%↑ | 25%↑ |
| 메인페이지 이탈률 | 15%↓ | 25%↓ | - |
| 등록 파트너 강사 | - | 20명(3개월) | 50명(6개월) |
| 월간 수강 예약 | - | 50건+ | 150건+ |
| 월 수수료 수익 | - | 25만원+ (검증 보정) | 100만원+ (검증 보정) |
| 파트너 적립금→재료 구매 | - | 50% | 60%+ |
| 수강 후 재료 구매 전환 | - | 40%+ | 50%+ |
| 수업 기획 도우미 월 사용 | - | - | 300회+ |
| 재료 장바구니 전환율 | - | - | 45%+ |
| 사진 리뷰 비율 | - | - | 40%+ |
| 월 신규 리뷰 | - | - | 100건+ |

### 기술 품질 지표

| 지표 | Phase 1 | Phase 2 |
|------|---------|---------|
| IIFE 미적용 JS | 0개 | 0개 |
| CSS 전역 셀렉터 | 0개 | 0개 |
| Lighthouse Performance | 80+ | 85+ |
| Lighthouse Accessibility | 85+ | 90+ |
| Core Web Vitals 합격 | 전체 통과 | 전체 유지 |

---

## 10. 기술 검증 결과

> **검증일**: 2026-02-19 | **판정**: 조건부 통과 | **기술적 신뢰도**: 7/10

### 10.1 검증 요약

PRD의 기술적 방향과 아키텍처 선택은 메이크샵 D4 환경에서 현실적이며,
핵심 API들(적립금, 회원그룹, 주문조회, 상품CRUD)의 존재가 확인되었다.
다만 Critical 3건 해결과 일정 20~30% 상향이 필요하다.

### 10.2 Critical Issues (반영 완료)

| # | 이슈 | 심각도 | 반영 위치 |
|---|------|--------|----------|
| C-1 | 파트너 인증/인가 메커니즘 부재 | 높음 | 4.3절 대시보드에 인증 설계 추가 |
| C-2 | 메이크샵 조회 API 500회/시간 공유 경합 | 높음 | 6.3절에 API 호출 예산 산정 추가 |
| C-3 | Sheets 기반 정산의 데이터 무결성 | 높음 | 4.5절에 LockService+상태관리 추가 |

### 10.3 Major Issues (반영 완료)

| # | 이슈 | 심각도 | 반영 위치 |
|---|------|--------|----------|
| M-1 | GAS 이메일 한도와 성장 시나리오 충돌 | 중간 | 6.3절 전환 기준 "일일 이메일 70건"으로 구체화 |
| M-2 | GAS 엔드포인트 보안 | 중간 | 4.3절에 토큰+Referer 체크+개인정보 마스킹 추가 |
| M-3 | 유튜브 v4 카테고리 매칭 정확도 | 중간 | 3.2절 매칭 로직에 긴 키워드 우선 정렬 적용 |
| M-4 | Phase 1 일정 과소평가 | 중간 | 3절 기간을 4~7주로 상향, 1a/1b 분리 |

### 10.4 일정 재산정

| Phase | 원래 추정 | 검증 후 추정 | 변경 사유 |
|-------|---------|------------|----------|
| Phase 1 | 2~4주 | **4~7주** (1a+1b) | 디자인 전면 리뉴얼 2건 + 유튜브 v4 신규 개발 |
| API 검증 | 없음 | **1~2주** (신규) | 적립금 API, 치환코드, 옵션 제한 사전 확인 |
| Phase 2 | 1.5~2개월 | **2~3개월** | API 연동 불확실성, 정산 안전성 설계 |
| Phase 3 | Phase 2 후 | 변경 없음 | Phase 2 패턴 재활용 가능 |

### 10.5 KPI 보정

| 지표 | 원래 목표 | 보정 목표 | 보정 근거 |
|------|---------|---------|----------|
| 월 수수료 (Phase 2) | 75만원+ | **25만원+** | 50건 x 평균 4만원 x 12% = 24만원 (원데이 클래스 실제 수강료 반영) |
| 월 수수료 (Phase 3) | 300만원+ | **100만원+** | 150건 x 평균 5만원 x 13% = 97.5만원 |
| LCP 30% 감소 | - | 변경 없음 | 단, 현재 baseline 측정 선행 필요 |

### 10.6 추가 검증 필요 사항 (Phase 2 착수 전)

1. **메이크샵 `process_reserve` API**: "특정 회원에게 N원 적립금 지급" 가능 여부 → 테스트 계정에서 직접 호출
2. **메이크샵 치환코드 `{$member_id}`**: 프론트에서 로그인 회원 ID 읽기 가능 여부 확인
3. **메이크샵 상품 옵션 수 제한**: 클래스 일정 증가 시 옵션 개수 제한 여부
4. **적립금 API 불가 시 대안**: 반자동(관리자 월 1회 수동 지급) → 쿠폰 API(`process_coupon`) 순

### 10.7 Minor Suggestions

- 에러 처리/장애 대응 전략: GAS 다운 시 프론트 "일시적 장애" 안내 UI, 관리자 알림
- 모바일 퍼스트 성능 기준: 현재 Lighthouse baseline 측정 후 절대값 목표 설정
- Graceful Degradation: 클래스 상세에서 파트너맵/유튜브/간편구매 연동 실패 시 해당 영역만 "준비 중" 표시
- GA4 이벤트 확장: Phase 2(예약 전환 퍼널), Phase 3(기획도우미 사용 패턴, 리뷰 작성률) 이벤트 설계
