# 메이크샵 클래스 상품 등록 가이드

> **작성일**: 2026-02-21
> **대상**: PRESSCO21 관리자
> **목적**: 파트너 클래스를 메이크샵 D4 "상품"으로 등록하는 전체 프로세스 가이드
> **관련 Task**: Task 202

---

## 목차

1. [사전 준비](#1-사전-준비)
2. [파트너 클래스 카테고리 생성](#2-파트너-클래스-카테고리-생성)
3. [클래스 상품 등록](#3-클래스-상품-등록)
4. [옵션(일정) 등록](#4-옵션일정-등록)
5. [branduid와 Google Sheets 연결](#5-branduid와-google-sheets-연결)
6. [상품 수정/중단/삭제 관리](#6-상품-수정중단삭제-관리)
7. [자주 묻는 질문](#7-자주-묻는-질문)

---

## 1. 사전 준비

### 필수 확인 사항

클래스 상품을 등록하기 전에 다음 사항이 완료되어 있어야 합니다.

| 항목 | 확인 방법 | 비고 |
|------|----------|------|
| 파트너 승인 완료 | Google Sheets "파트너 상세" 시트에서 해당 파트너 상태가 ACTIVE | Task 223 참조 |
| GAS 백엔드 배포 | GAS 웹 앱 URL이 발급된 상태 | Task 201 배포 가이드 참조 |
| 오픈 API 활성화 | 관리자 > 기본설정 > 오픈 API 에서 수정 권한 허용 | Task 150에서 확인 완료 |

### 클래스 정보 수집 (파트너로부터)

상품 등록 전에 파트너에게 다음 정보를 받아야 합니다.

- 클래스명 (예: "봄꽃 압화 원데이 클래스")
- 수강료 (원 단위)
- 수업 시간 (분 단위, 예: 120분)
- 최대 정원 (명)
- 수업 장소 (주소)
- 일정 (날짜 + 시간, 여러 개 가능)
- 대표 이미지 (최소 1장, 권장 3~5장)
- 클래스 설명 (커리큘럼, 준비물 등)
- 재료비 포함 여부
- 난이도 (입문/중급/심화)

---

## 2. 파트너 클래스 카테고리 생성

> 최초 1회만 수행하면 됩니다. 이미 생성했다면 3단계로 건너뛰세요.

### 2-1. 카테고리 관리 페이지 이동

```
메이크샵 관리자 > 상품관리 > 카테고리관리
```

### 2-2. 대분류 카테고리 생성

1. "대분류 추가" 버튼 클릭
2. 카테고리명: **파트너 클래스** 입력
3. 카테고리 노출 여부: **사용함** 선택
4. 카테고리 설명: "PRESSCO21 제휴 파트너의 압화/보존화 클래스" 입력
5. **저장** 클릭

### 2-3. 소분류 카테고리 생성 (선택)

클래스 유형별로 소분류를 만들면 관리가 편리합니다.

1. "파트너 클래스" 대분류 선택
2. "중분류 추가" 버튼 클릭
3. 다음 소분류를 각각 생성:

| 소분류명 | 용도 |
|---------|------|
| 원데이 클래스 | 1회성 체험 수업 |
| 정기 클래스 | 2회 이상 연속 수업 |
| 온라인 클래스 | 영상/화상 수업 |

### 2-4. 카테고리 ID 확인 및 기록

1. 생성된 "파트너 클래스" 카테고리를 클릭
2. 브라우저 주소창 또는 카테고리 관리 화면에서 **카테고리 번호(숫자)** 를 확인
   - URL 예시: `https://foreverlove.co.kr/admin/...&cate_no=XXX`
   - 이 번호가 카테고리 ID
3. Google Sheets **"시스템 설정"** 시트에 기록:
   - key: `class_category_id`
   - value: 확인한 카테고리 번호 (예: `123`)

> **중요**: 이 카테고리 ID는 GAS의 `syncClassProducts_()` 함수가 클래스 상품만 필터링하는 데 사용됩니다.

---

## 3. 클래스 상품 등록

### 3-1. 상품 등록 페이지 이동

```
메이크샵 관리자 > 상품관리 > 상품등록
```

### 3-2. 기본 정보 입력

| 항목 | 입력 내용 | 예시 |
|------|----------|------|
| **상품명** | `[파트너명] 클래스명` | `[꽃공방 장지호] 봄꽃 압화 원데이 클래스` |
| **상품 카테고리** | "파트너 클래스" 선택 (소분류가 있으면 해당 소분류 선택) | 파트너 클래스 > 원데이 클래스 |
| **판매가** | 수강료 입력 | 65,000원 |
| **공급가** | 0원 (수수료 정산은 GAS에서 처리) | 0원 |
| **배송비** | 재료비 포함이면 0원, 별도 배송이면 해당 금액 | 0원 |
| **배송방법** | "직접수령(방문수령)" 또는 "무료배송" | 직접수령(방문수령) |
| **상품 간략 설명** | 한 줄 요약 | "120분 동안 봄꽃을 활용한 압화 에코백을 만들어 보세요" |

### 3-3. 상품명 작성 규칙

상품명은 다음 형식을 **반드시** 따라주세요. GAS 시스템이 파트너를 식별하는 데 사용합니다.

```
[파트너명] 클래스명
```

- 파트너명은 Google Sheets "파트너 상세" 시트의 `partner_name` 값
- 대괄호 `[ ]`를 반드시 사용

**올바른 예시:**
- `[꽃공방 장지호] 봄꽃 압화 원데이 클래스`
- `[플라워라이프] 보존화 부케 정기 클래스 (4주)`
- `[레진아트 스튜디오] 레진 아트 입문 온라인 클래스`

**잘못된 예시:**
- `봄꽃 압화 원데이 클래스` (파트너명 누락)
- `꽃공방 장지호 - 봄꽃 압화` (대괄호 미사용)

### 3-4. 상품 이미지 등록

```
메이크샵 관리자 > 상품관리 > 상품등록 > 이미지 등록 영역
```

| 이미지 종류 | 권장 사양 | 용도 |
|------------|----------|------|
| 대표 이미지 | 800x800px, JPG/PNG | 목록 썸네일, 검색 결과 |
| 추가 이미지 1~4 | 800x600px 이상 | 수업 현장, 완성작, 재료 사진 |
| 상세 이미지 | 가로 860px 이내 | 상세 설명 영역에 삽입 |

**이미지 촬영 가이드:**
- 수업 현장 분위기가 느껴지는 밝은 조명 사진
- 완성 작품 근접 샷
- 재료/도구 배치 사진
- 강사 프로필 사진 (선택)

### 3-5. 상세 설명(HTML) 작성

상품 상세 설명에 다음 내용을 포함합니다. 메이크샵 에디터의 "소스" 모드에서 HTML을 직접 작성하거나, 에디터 도구를 사용합니다.

**포함할 내용:**

1. **클래스 소개**: 1~2문단으로 클래스의 매력 설명
2. **커리큘럼**: 시간별 진행 순서
3. **강사 소개**: 경력, 전문 분야
4. **준비물**: 수강생이 가져와야 할 것 (있으면)
5. **장소 안내**: 주소, 찾아오는 방법
6. **유의사항**: 환불 규정, 최소 인원 등

**상세 설명 HTML 템플릿:**

```html
<div style="max-width:860px; margin:0 auto; font-family:'Noto Sans KR',sans-serif;">

  <h3>클래스 소개</h3>
  <p>봄꽃을 활용한 압화 에코백 만들기! 120분 동안 자연의 아름다움을 담아보세요.</p>

  <h3>커리큘럼</h3>
  <table border="1" cellpadding="8" style="border-collapse:collapse; width:100%;">
    <tr><th>시간</th><th>내용</th></tr>
    <tr><td>0~20분</td><td>압화 기초 이론 + 재료 소개</td></tr>
    <tr><td>20~90분</td><td>에코백 디자인 및 압화 배치</td></tr>
    <tr><td>90~120분</td><td>마감 처리 + 포장 + 질의응답</td></tr>
  </table>

  <h3>강사 소개</h3>
  <p><strong>장지호</strong> | 꽃공방 대표 | 압화 10년 경력</p>

  <h3>장소</h3>
  <p>서울특별시 강남구 역삼동 123-45 꽃공방빌딩 3층</p>

  <h3>포함 사항</h3>
  <ul>
    <li>모든 재료비 포함 (압화 꽃, 에코백, 접착제 등)</li>
    <li>완성 작품 포장</li>
  </ul>

  <h3>유의사항</h3>
  <ul>
    <li>수업 3일 전까지 취소 시 전액 환불</li>
    <li>수업 당일 취소/노쇼 시 환불 불가</li>
    <li>최소 인원 3명 미달 시 일정 변경될 수 있습니다</li>
  </ul>

</div>
```

---

## 4. 옵션(일정) 등록

> 클래스의 날짜/시간 슬롯은 메이크샵 "옵션"으로 등록합니다.
> 각 옵션의 재고 = 정원(최대 수강 인원)입니다.

### 4-1. 옵션 설정 페이지

```
메이크샵 관리자 > 상품관리 > 상품등록(또는 상품수정) > 옵션/추가구성 탭
```

### 4-2. 옵션 유형 설정

1. **옵션 사용**: "사용함" 선택
2. **옵션명**: "수업 일정" 입력
3. **옵션 입력 방식**: "직접 입력" 선택

### 4-3. 옵션값(일정) 입력

각 수업 일정을 하나의 옵션값으로 등록합니다.

**옵션값 형식 (필수 준수):**

```
YYYY-MM-DD HH:mm 요일
```

예시:
```
2026-03-15 14:00 토
2026-03-22 10:00 토
2026-03-29 14:00 토
```

> **중요**: 이 형식은 GAS `handlePollOrders()`가 주문의 `option_value`에서 일정을 파싱하는 데 사용됩니다. 형식을 변경하면 일정 인식이 실패할 수 있습니다.

### 4-4. 옵션별 재고(정원) 설정

1. 옵션값을 모두 입력한 후 **"옵션 목록에 적용"** 버튼 클릭
2. 생성된 옵션 목록에서 각 일정별 재고를 설정:
   - **재고 관리**: "사용함" 체크
   - **재고 수량**: 해당 일정의 정원 수 입력 (예: 8)

| 옵션값 | 재고(정원) | 추가금액 |
|--------|----------|---------|
| 2026-03-15 14:00 토 | 8 | 0 |
| 2026-03-22 10:00 토 | 8 | 0 |
| 2026-03-29 14:00 토 | 8 | 0 |

**재고 관리 원리:**
- 수강생이 결제하면 메이크샵이 자동으로 해당 옵션의 재고를 1 차감
- 재고가 0이 되면 "품절" 표시 (= 정원 마감)
- 수강 완료된 과거 일정의 옵션은 삭제하고, 새 일정을 추가

### 4-5. 옵션 추가금액 활용 (선택)

특수한 경우 옵션별 가격 차등이 필요할 수 있습니다.

- 주말 수업에 추가 요금: 해당 옵션의 "추가금액"에 금액 입력
- 평일 할인: 기본가를 주말 가격으로 설정하고, 평일 옵션에 음수 금액 입력

---

## 5. branduid와 Google Sheets 연결

### 5-1. branduid(상품코드) 확인

상품 등록을 **저장**한 후, 상품코드(branduid)를 확인합니다.

```
메이크샵 관리자 > 상품관리 > 상품 리스트
```

1. 등록한 클래스 상품을 찾기 (상품명 검색)
2. 상품 목록에서 **"상품코드"** 컬럼의 숫자를 확인
   - 이것이 `branduid` (예: `P000000Y`)
3. 또는 상품 수정 화면 상단에서 "상품코드" 확인

### 5-2. Google Sheets "클래스 메타" 시트에 기입

Google Sheets "PRESSCO21 파트너 클래스 플랫폼" 스프레드시트를 엽니다.

**"클래스 메타" 시트에 새 행 추가:**

| 컬럼 | 필드명 | 입력 내용 | 예시 |
|------|--------|----------|------|
| A | class_id | 자동 부여 (CLS001, CLS002, ...) | CLS001 |
| B | makeshop_product_id | 확인한 branduid | P000000Y |
| C | partner_code | 파트너 코드 ("파트너 상세" A열) | P001 |
| D | class_name | 클래스명 (상품명에서 [파트너명] 제외) | 봄꽃 압화 원데이 클래스 |
| E | category | ONEDAY / REGULAR / ONLINE | ONEDAY |
| F | level | BEGINNER / INTERMEDIATE / ADVANCED | BEGINNER |
| G | price | 수강료 | 65000 |
| H | duration_min | 수업 시간(분) | 120 |
| I | max_students | 최대 정원 | 8 |
| J~N | (설명, 이미지 등) | 필요 시 입력 | |
| T | status | ACTIVE | ACTIVE |
| U | created_date | 오늘 날짜 | 2026-03-01 |

> **참고**: `syncClassProducts_()` 배치 함수가 매일 오전 3시에 메이크샵 상품 정보와 Sheets를 자동 동기화합니다. 하지만 최초 등록 시에는 수동으로 기입해야 GAS가 즉시 인식합니다.

### 5-3. 연결 확인

등록이 올바른지 확인하는 방법:

1. GAS 웹 앱에서 클래스 목록 조회 테스트:
   ```
   GET {GAS_URL}?action=getClasses
   ```
2. 응답에서 방금 등록한 클래스가 나타나는지 확인
3. 클래스 상세 조회 테스트:
   ```
   GET {GAS_URL}?action=getClassDetail&id=CLS001
   ```

---

## 6. 상품 수정/중단/삭제 관리

### 6-1. 일정 추가 (새 옵션 추가)

새로운 수업 일정이 생기면:

```
메이크샵 관리자 > 상품관리 > 상품수정 > 옵션/추가구성 탭
```

1. 기존 옵션 목록 하단에 새 옵션값 추가 (형식: `YYYY-MM-DD HH:mm 요일`)
2. 재고(정원) 설정
3. **저장**

### 6-2. 지난 일정 정리

수업이 완료된 과거 일정은 옵션에서 삭제합니다.

1. 해당 옵션값 선택
2. "삭제" 버튼 클릭
3. **저장**

> **주의**: 아직 결제된 예약이 있는 옵션은 삭제하지 마세요! 먼저 수강 확인/정산이 완료된 후 삭제하세요.

### 6-3. 클래스 일시 중단

파트너가 일시적으로 클래스를 중단하고 싶은 경우:

**방법 A: 메이크샵에서 비노출 처리**
```
상품관리 > 상품수정 > 기본 정보 > 판매 상태: "품절" 또는 "비노출"로 변경
```

**방법 B: Google Sheets에서 상태 변경**
- "클래스 메타" 시트의 T열(status)을 `ACTIVE` -> `INACTIVE`로 변경
- GAS가 목록 조회 시 INACTIVE 클래스를 제외

> 두 가지를 **모두** 수행하는 것을 권장합니다.

### 6-4. 클래스 완전 삭제

클래스를 더 이상 운영하지 않는 경우:

1. 메이크샵에서 상품 삭제 (또는 비노출 처리)
2. Google Sheets "클래스 메타" 시트의 T열(status)을 `INACTIVE`로 변경
3. **행을 직접 삭제하지 마세요** - 과거 정산 내역의 참조 무결성을 위해 상태만 변경

### 6-5. 가격 변경

```
메이크샵 관리자 > 상품관리 > 상품수정 > 판매가 변경
```

1. 새 가격 입력 후 저장
2. Google Sheets "클래스 메타" G열(price)도 함께 수정
3. 또는 `syncClassProducts_()` 배치가 다음 새벽에 자동 반영

> **주의**: 이미 예약된 수강생에게는 기존 가격이 적용됩니다. 가격 변경은 변경 이후의 새 예약에만 적용됩니다.

---

## 7. 자주 묻는 질문

### Q1. 옵션 개수에 제한이 있나요?

**아니요.** Task 151 검증 결과, 메이크샵 D4에서 옵션 개수에 제한이 없습니다. 수십 개의 일정을 등록해도 문제없습니다.

### Q2. 재고(정원)를 옵션별로 다르게 설정할 수 있나요?

**네.** 옵션별 개별 재고 설정이 가능합니다. 예를 들어 평일은 6명, 주말은 10명처럼 다르게 설정할 수 있습니다.

### Q3. 수강생이 결제하면 어떤 일이 일어나나요?

1. 메이크샵에서 해당 옵션의 재고가 1 차감됩니다
2. GAS `pollOrders` 함수가 10분 이내에 새 주문을 감지합니다
3. 자동으로 다음이 실행됩니다:
   - 수강생에게 예약 확인 이메일 발송
   - 파트너에게 예약 안내 이메일 발송
   - Google Sheets "정산 내역"에 수수료 계산 기록
   - 파트너에게 적립금 자동 지급

### Q4. branduid를 Sheets에 기입하지 않으면?

`syncClassProducts_()` 배치 함수가 매일 오전 3시에 자동으로 동기화합니다. 하지만 수동 기입 전까지는 해당 클래스 상품의 주문이 GAS에서 인식되지 않습니다 (일반 상품 주문으로 무시됨). **등록 직후 수동 기입을 권장합니다.**

### Q5. 한 파트너가 여러 클래스를 등록할 수 있나요?

**네.** 파트너 1명이 여러 개의 클래스 상품을 등록할 수 있습니다. 각 상품마다 별도의 class_id가 부여되며, 모든 정산은 파트너 코드(partner_code)로 합산됩니다.

### Q6. 상품 설명을 나중에 GAS에서 자동으로 채울 수 있나요?

현재는 메이크샵 관리자에서 직접 입력합니다. Phase 2-B (Task 212)에서 클래스 상세 페이지 UI를 구현하면, Sheets 데이터를 기반으로 프론트엔드에서 동적으로 표시합니다. 메이크샵 상품 상세는 간단한 안내만 두고, 실제 상세 내용은 클래스 상세 페이지에서 보여주는 구조입니다.

---

## 부록: 등록 체크리스트

클래스 상품 하나를 등록할 때마다 아래 체크리스트를 확인하세요.

- [ ] 상품명 형식: `[파트너명] 클래스명`
- [ ] 카테고리: "파트너 클래스" (또는 소분류)
- [ ] 판매가: 파트너와 합의한 수강료
- [ ] 배송 설정: "직접수령" 또는 "무료배송"
- [ ] 대표 이미지: 최소 1장 등록
- [ ] 상세 설명: 커리큘럼, 강사 소개, 장소, 유의사항 포함
- [ ] 옵션 등록: 일정 형식 `YYYY-MM-DD HH:mm 요일`
- [ ] 옵션별 재고: 정원 수 설정
- [ ] branduid 확인: 상품 코드 기록
- [ ] Sheets "클래스 메타" B열: branduid 기입
- [ ] Sheets "클래스 메타" C열: partner_code 기입
- [ ] Sheets "클래스 메타" T열: ACTIVE 설정
- [ ] GAS API 조회 테스트: getClasses에서 표시 확인
