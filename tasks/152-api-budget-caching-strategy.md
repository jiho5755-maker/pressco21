# Task 152: API 호출 예산(Budget) 산정 및 캐싱 전략 수립

> **상태**: 완료
> **Phase**: 1.5 (API 검증)
> **에이전트**: `주도` makeshop-planning-expert | `협업` gas-backend-expert, ecommerce-business-expert
> **의존성**: Task 150 (적립금 API 검증), Task 151 (가상태그/옵션 검증)

---

## 목적

메이크샵 API 제한(조회/처리 각 500회/시간)을 고려하여, 현재 운영 서비스 + Phase 2 클래스 플랫폼의 서비스별 API 호출 예산을 배분하고, 2계층 캐싱 전략을 확정한다.

---

## 완료 항목

- [x] 현재 운영 서비스(유튜브 v4, 파트너맵) API 호출 패턴 분석
- [x] Phase 2 서비스별 시간당 API 호출 예상량 산정
- [x] 시나리오별 총 호출량 합산 (일반/피크/배치/최악)
- [x] 서비스별 API 예산 배분표 작성
- [x] 데이터 유형별 캐싱 전략 확정 (정적 24h / 반정적 1h / 실시간)
- [x] GAS CacheService + localStorage 2계층 캐싱 아키텍처 설계
- [x] GAS 주문 폴링 간격 결정 (10분, 6회/시간)
- [x] 위험 완화 방안 설계 (모니터링, 자동 방어, Phase 3 확장)

---

## 핵심 결론

1. **현재 메이크샵 API 사용량: 0회/시간** -- 유튜브 v4와 파트너맵은 Sheets 기반
2. **Phase 2 추가 후: 한도의 10% 미만** (조회 ~28회, 처리 ~10회/시간)
3. **Phase 2+3 모두: 한도의 7~10%** -- 500회/시간 제한은 병목이 되지 않음
4. **주문 폴링: 10분 간격 확정** (비용/응답성 최적 균형)

---

## 산출물

- `docs/api-budget-caching-strategy.md` -- 상세 분석 보고서

---

## 구현 단계

| # | 단계 | 상태 |
|---|------|------|
| 1 | 현재 GAS 코드 분석 (유튜브 v4, 파트너맵) | 완료 |
| 2 | API 호출 패턴 분석 (메이크샵 API vs Sheets) | 완료 |
| 3 | Phase 2 서비스별 호출량 산정 | 완료 |
| 4 | 시나리오별 합산 및 예산 배분 | 완료 |
| 5 | 캐싱 전략 설계 (2계층) | 완료 |
| 6 | 위험 완화 방안 | 완료 |
| 7 | 분석 보고서 작성 | 완료 |
